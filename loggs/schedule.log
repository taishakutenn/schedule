2025-07-15 01:01:09,433 - schedule - WARNING - Не было найдено ни одного учителя
2025-07-15 01:01:09,433 - schedule - WARNING - Не было найдено ни одного учителя
2025-07-15 01:01:34,737 - schedule - WARNING - Не было найдено ни одного учителя
2025-07-15 01:01:34,737 - schedule - WARNING - Не было найдено ни одного учителя
2025-07-15 23:00:24,126 - schedule - INFO - Новый учитель успешно добавлен в бд
2025-07-15 23:00:24,126 - schedule - INFO - Новый учитель успешно добавлен в бд
2025-07-15 23:01:06,869 - schedule - INFO - Найдено учителей: 1
2025-07-15 23:01:06,869 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:10:22,535 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:10:22,535 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:10:50,445 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:11:57,812 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:11:57,812 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:13:24,936 - schedule - INFO - Найдено учителей: 1
2025-07-16 00:15:33,649 - schedule - INFO - Найдено учителей тест: 1
2025-07-24 15:27:27,497 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:27:27,697 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:27:43,506 - schedule - INFO - → Вызов: TeacherDAL.create_teacher с аргументами {'name': 'string', 'surname': 'string', 'phone_number': 'string', 'email': 'user@example.com', 'fathername': 'string'}
2025-07-24 15:27:43,639 - schedule - INFO - ✓ TeacherDAL.create_teacher завершён успешно
2025-07-24 15:27:56,427 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:27:56,429 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:28:08,186 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:28:08,349 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:29:45,529 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:29:45,615 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:29:45,616 - schedule - WARNING - Удаление учителя отменено (Ошибка: 404: Учитель с id: 1 не найден)
2025-07-24 15:30:15,168 - schedule - INFO - → Вызов: TeacherDAL.create_teacher с аргументами {'name': 'string', 'surname': 'string', 'phone_number': 'string', 'email': 'user@example.com', 'fathername': 'string'}
2025-07-24 15:30:15,208 - schedule - INFO - ✓ TeacherDAL.create_teacher завершён успешно
2025-07-24 15:30:23,470 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:30:23,474 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:30:23,474 - schedule - WARNING - Удаление учителя отменено (Ошибка: 404: Учитель с id: 1 не найден)
2025-07-24 15:30:42,513 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:30:42,518 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:30:44,245 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:30:44,247 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:30:55,154 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:30:55,205 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:31:44,374 - schedule - INFO - → Вызов: TeacherDAL.create_teacher с аргументами {'name': 'string', 'surname': 'string', 'phone_number': 'string', 'email': 'user@example.com', 'fathername': 'string'}
2025-07-24 15:31:44,427 - schedule - INFO - ✓ TeacherDAL.create_teacher завершён успешно
2025-07-24 15:31:48,517 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:31:48,520 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:31:53,772 - schedule - INFO - → Вызов: TeacherDAL.create_teacher с аргументами {'name': 'string', 'surname': 'string', 'phone_number': 'string', 'email': 'user@example.com', 'fathername': 'string'}
2025-07-24 15:31:53,801 - schedule - INFO - ✓ TeacherDAL.create_teacher завершён успешно
2025-07-24 15:31:56,166 - schedule - INFO - → Вызов: TeacherDAL.get_all_teachers с аргументами {}
2025-07-24 15:31:56,168 - schedule - INFO - ✓ TeacherDAL.get_all_teachers завершён успешно
2025-07-24 15:32:02,757 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:32:02,761 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:32:02,761 - schedule - WARNING - Удаление учителя отменено (Ошибка: 404: Учитель с id: 1 не найден)
2025-07-24 15:32:04,991 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:32:04,995 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:32:04,996 - schedule - WARNING - Удаление учителя отменено (Ошибка: 404: Учитель с id: 2 не найден)
2025-07-24 15:32:06,960 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:32:06,983 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:32:08,735 - schedule - INFO - → Вызов: TeacherDAL.delete_teacher с аргументами {}
2025-07-24 15:32:08,766 - schedule - INFO - ✓ TeacherDAL.delete_teacher завершён успешно
2025-07-24 15:33:58,405 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:33:58,424 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:34:05,559 - schedule - INFO - → Вызов: BuildingDAL.get_all_buildings с аргументами {}
2025-07-24 15:34:05,562 - schedule - INFO - ✓ BuildingDAL.get_all_buildings завершён успешно
2025-07-24 15:34:12,903 - schedule - INFO - → Вызов: BuildingDAL.create_building с аргументами {'building_number': 0, 'city': 'string', 'building_address': 'string'}
2025-07-24 15:34:12,946 - schedule - INFO - ✓ BuildingDAL.create_building завершён успешно
2025-07-24 15:34:22,322 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:34:22,324 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:34:24,536 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:34:24,539 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:35:16,262 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:35:16,349 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:35:19,711 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:35:19,714 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:38:03,839 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:38:03,936 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-24 15:38:09,992 - schedule - INFO - → Вызов: BuildingDAL.get_building_by_number с аргументами {}
2025-07-24 15:38:09,994 - schedule - INFO - ✓ BuildingDAL.get_building_by_number завершён успешно
2025-07-27 19:30:08,725 - schedule - INFO - → Вызов: SpecialityDAL.create_speciality с аргументами {'speciality_code': 'ПКЛ-11'}
2025-07-27 19:30:09,399 - schedule - INFO - ✓ SpecialityDAL.create_speciality завершён успешно
2025-07-27 19:30:14,709 - schedule - INFO - → Вызов: SpecialityDAL.get_all_specialties с аргументами {}
2025-07-27 19:30:14,761 - schedule - ERROR - ✗ Ошибка в SpecialityDAL.get_all_specialties: 'Speciality' object has no attribute 'all'
Traceback (most recent call last):
  File "d:\Files of projects\Python\schedule\schedule\config\decorators.py", line 14, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\Files of projects\Python\schedule\schedule\db\dals.py", line 248, in get_all_specialties
    specialities = list(result.scalar().all())
                        ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Speciality' object has no attribute 'all'
2025-07-27 19:31:01,596 - schedule - INFO - → Вызов: SpecialityDAL.get_all_specialties с аргументами {}
2025-07-27 19:31:01,680 - schedule - ERROR - ✗ Ошибка в SpecialityDAL.get_all_specialties: 'Speciality' object is not iterable
Traceback (most recent call last):
  File "d:\Files of projects\Python\schedule\schedule\config\decorators.py", line 14, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\Files of projects\Python\schedule\schedule\db\dals.py", line 248, in get_all_specialties
    specialities = list(result.scalar())
TypeError: 'Speciality' object is not iterable
2025-07-27 19:33:08,774 - schedule - INFO - → Вызов: SpecialityDAL.get_all_specialties с аргументами {}
2025-07-27 19:33:08,853 - schedule - INFO - ✓ SpecialityDAL.get_all_specialties завершён успешно
2025-07-27 19:33:20,770 - schedule - INFO - → Вызов: SpecialityDAL.get_speciality с аргументами {}
2025-07-27 19:33:20,817 - schedule - INFO - ✓ SpecialityDAL.get_speciality завершён успешно
2025-07-27 19:33:37,015 - schedule - INFO - → Вызов: SpecialityDAL.get_speciality с аргументами {}
2025-07-27 19:33:37,017 - schedule - INFO - ✓ SpecialityDAL.get_speciality завершён успешно
2025-07-27 19:33:47,749 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:33:47,772 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:34:22,109 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:34:22,217 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:35:20,788 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:35:20,790 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:35:24,813 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:35:24,815 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:35:32,469 - schedule - INFO - → Вызов: SpecialityDAL.get_all_specialties с аргументами {}
2025-07-27 19:35:32,472 - schedule - INFO - ✓ SpecialityDAL.get_all_specialties завершён успешно
2025-07-27 19:35:45,489 - schedule - INFO - → Вызов: BuildingDAL.create_building с аргументами {'building_number': 0, 'city': 'string', 'building_address': 'string'}
2025-07-27 19:35:45,581 - schedule - ERROR - ✗ Ошибка в BuildingDAL.create_building: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "buildings_pkey"
DETAIL:  Key (building_number)=(0) already exists.
[SQL: INSERT INTO buildings (building_number, city, building_address) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR)]
[parameters: (0, 'string', 'string')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "buildings_pkey"
DETAIL:  Key (building_number)=(0) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "buildings_pkey"
DETAIL:  Key (building_number)=(0) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "d:\Files of projects\Python\schedule\schedule\config\decorators.py", line 14, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\Files of projects\Python\schedule\schedule\db\dals.py", line 97, in create_building
    await self.db_session.flush()
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 801, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "buildings_pkey"
DETAIL:  Key (building_number)=(0) already exists.
[SQL: INSERT INTO buildings (building_number, city, building_address) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR)]
[parameters: (0, 'string', 'string')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 19:35:57,946 - schedule - INFO - → Вызов: BuildingDAL.create_building с аргументами {'building_number': 45, 'city': 'string', 'building_address': 'string'}
2025-07-27 19:35:57,981 - schedule - INFO - ✓ BuildingDAL.create_building завершён успешно
2025-07-27 19:36:12,563 - schedule - INFO - → Вызов: BuildingDAL.delete_building с аргументами {}
2025-07-27 19:36:12,639 - schedule - INFO - ✓ BuildingDAL.delete_building завершён успешно
2025-07-27 19:36:29,884 - schedule - INFO - → Вызов: SpecialityDAL.create_speciality с аргументами {'speciality_code': '1'}
2025-07-27 19:36:29,914 - schedule - INFO - ✓ SpecialityDAL.create_speciality завершён успешно
2025-07-27 19:36:34,806 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:36:34,808 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:36:40,098 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:36:40,122 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:36:44,801 - schedule - INFO - → Вызов: SpecialityDAL.get_all_specialties с аргументами {}
2025-07-27 19:36:44,803 - schedule - INFO - ✓ SpecialityDAL.get_all_specialties завершён успешно
2025-07-27 19:39:49,974 - schedule - INFO - → Вызов: SpecialityDAL.create_speciality с аргументами {'speciality_code': '1'}
2025-07-27 19:39:50,076 - schedule - INFO - ✓ SpecialityDAL.create_speciality завершён успешно
2025-07-27 19:39:53,827 - schedule - INFO - → Вызов: SpecialityDAL.delete_speciality с аргументами {}
2025-07-27 19:39:53,859 - schedule - INFO - ✓ SpecialityDAL.delete_speciality завершён успешно
2025-07-27 19:40:13,086 - schedule - INFO - → Вызов: SpecialityDAL.create_speciality с аргументами {'speciality_code': '1'}
2025-07-27 19:40:13,108 - schedule - INFO - ✓ SpecialityDAL.create_speciality завершён успешно
2025-07-27 19:40:21,619 - schedule - INFO - → Вызов: SpecialityDAL.update_speciality с аргументами {'new_speciality_code': '2'}
2025-07-27 19:40:21,620 - schedule - ERROR - ✗ Ошибка в SpecialityDAL.update_speciality: Unconsumed column names: new_speciality_code
Traceback (most recent call last):
  File "d:\Files of projects\Python\schedule\schedule\config\decorators.py", line 14, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\Files of projects\Python\schedule\schedule\db\dals.py", line 270, in update_speciality
    res = await self.db_session.execute(query)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1648, in orm_execute_statement
    return super().orm_execute_statement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session,
        ^^^^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, visitor, **kw
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 6269, in visit_update
    crud_params_struct = crud._get_crud_params(
        self, update_stmt, compile_state, toplevel, **kw
    )
  File "D:\Files of projects\Python\schedule\schedule\venv\Lib\site-packages\sqlalchemy\sql\crud.py", line 335, in _get_crud_params
    raise exc.CompileError(
    ...<2 lines>...
    )
sqlalchemy.exc.CompileError: Unconsumed column names: new_speciality_code
2025-07-27 19:40:21,734 - schedule - WARNING - Изменение данных о специальности отменено (Ошибка: Unconsumed column names: new_speciality_code)
